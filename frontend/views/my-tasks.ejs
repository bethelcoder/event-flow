<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>My Tasks</title>
  <link rel="stylesheet" href="/styles/footer.css">
  <link rel="stylesheet" href="/styles/staff-dashboard.css">
  <link rel="stylesheet" href="/styles/my-tasks.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
</head>
<body>

<!-- =================== Scrollable Wrapper =================== -->
<section class="tasks-container-wrapper">

  <!-- Header with task stats -->
  <section class="tasks-header">
    <h2>My Tasks</h2>
    <div class="task-summary-buttons">
      <button>Total No: 10</button>
      <button>Pending: 4</button>
      <button>In Progress: 3</button>
      <button>Completed: 3</button>
    </div>
  </section>

  <!-- =================== Today's Progress Box =================== -->
  <section class="progress-box">
    <h3>Today's Progress</h3>
    <div class="progress-bar-wrapper">
      <div class="progress-bar">
        <div class="progress-fill" style="width: 60%;"></div>
      </div>
      <span class="progress-percentage">60%</span>
    </div>
    <div class="progress-stats">
      <div>Pending: 4</div>
      <div>In Progress: 3</div>
      <div>Completed: 3</div>
      <div>Overdue: 0</div>
    </div>
  </section>

  <!-- =================== Filter Buttons =================== -->
  <section class="task-filter-wrapper">
    <div class="task-filter-buttons">
      <button data-filter="all"><i class="fas fa-list"></i> All Tasks (10)</button>
      <button data-filter="pending"><i class="fas fa-hourglass-start"></i> Pending (4)</button>
      <button data-filter="inprogress"><i class="fas fa-spinner"></i> In Progress (3)</button>
      <button data-filter="completed"><i class="fas fa-check-circle"></i> Completed (3)</button>
    </div>
  </section>

  <!-- =================== Tasks List =================== -->
  <section class="tasks-container">
    <!-- Example task box -->
    <section class="task-box" data-status="pending">
      <div class="task-header">
        <span class="task-title">Test all microphones on main stage</span>
        <span class="task-priority"><i class="fas fa-exclamation-circle"></i> High</span>
        <span class="task-status inprogress"><i class="fas fa-spinner"></i> In Progress</span>
        <span class="task-overdue"><i class="fas fa-calendar-times"></i> Overdue</span>
      </div>
      <div class="task-body">
        <span><i class="fas fa-user"></i> Assigned by: John Doe</span> &nbsp;&nbsp;
        <span><i class="fas fa-calendar-alt"></i> Due: 25 Aug, 5 PM</span>
      </div>
      <div class="task-footer">
        <button class="task-action-btn">Start Task</button>
      </div>
    </section>

    <!-- Add more tasks here -->
    <section class="task-box" data-status="pending">
      <div class="task-header">
        <span class="task-title">Check all lighting in hall</span>
        <span class="task-priority"><i class="fas fa-exclamation-circle"></i> Medium</span>
        <span class="task-status pending"><i class="fas fa-hourglass-start"></i> Pending</span>
      </div>
      <div class="task-body">
        <span><i class="fas fa-user"></i> Assigned by: Jane Smith</span> &nbsp;&nbsp;
        <span><i class="fas fa-calendar-alt"></i> Due: 26 Aug, 3 PM</span>
      </div>
      <div class="task-footer">
        <button class="task-action-btn">Start Task</button>
      </div>
    </section>

  </section>

</section>

<!-- =================== Script =================== -->
<script>
document.addEventListener("DOMContentLoaded", function() {
  // Filter buttons
  const filterButtons = document.querySelectorAll('.task-filter-buttons button');
  const tasks = document.querySelectorAll('.tasks-container .task-box');

  filterButtons.forEach(btn => {
    btn.addEventListener('click', () => {
      const filter = btn.getAttribute('data-filter');
      tasks.forEach(task => {
        if (filter === 'all' || task.dataset.status === filter) {
          task.style.display = 'block';
        } else {
          task.style.display = 'none';
        }
      });
    });
  });

  // Task action buttons
  const taskActionButtons = document.querySelectorAll('.task-action-btn');
  taskActionButtons.forEach(btn => {
    btn.addEventListener('click', () => {
      const parent = btn.closest('.task-box');
      const statusEl = parent.querySelector('.task-status');

      if (btn.textContent === 'Start Task') {
        btn.textContent = 'Mark Complete';
        parent.dataset.status = 'inprogress';
        if (statusEl) {
          statusEl.innerHTML = '<i class="fas fa-spinner"></i> In Progress';
          statusEl.className = 'task-status inprogress';
        }
      } else if (btn.textContent === 'Mark Complete') {
        const report = prompt("Enter completion report (optional):");
        if (report !== null) {
          alert("Completion report saved:\n" + report);
        }
        btn.textContent = 'Completed';
        parent.dataset.status = 'completed';
        if (statusEl) {
          statusEl.innerHTML = '<i class="fas fa-check-circle"></i> Completed';
          statusEl.className = 'task-status completed';
        }
        btn.disabled = true;
      }
    });
  });
});
</script>

</body>
</html>
