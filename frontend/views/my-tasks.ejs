<section class="tasks-wrapper">

  <!-- =================== Header with task stats =================== -->
  <section class="tasks-header">
    <h2>My Tasks</h2>
    <div class="task-summary-boxes">
      <div class="summary-box">
        <span class="summary-title">Total</span>
        <span class="summary-number total-no">0</span>
      </div>
      <div class="summary-box">
        <span class="summary-title">Pending</span>
        <span class="summary-number pending-no">0</span>
      </div>
      <div class="summary-box">
        <span class="summary-title">In Progress</span>
        <span class="summary-number inprogress-no">0</span>
      </div>
      <div class="summary-box">
        <span class="summary-title">Completed</span>
        <span class="summary-number completed-no">0</span>
      </div>
    </div>
  </section>

  <!-- =================== Progress Bar =================== -->
  <section class="progress-section">
    <h3>Today's Progress</h3>
    <div class="progress-bar-wrapper">
      <div class="progress-bar">
        <div class="progress-fill" style="width: 0%;"></div>
      </div>
      <span class="progress-percentage">0%</span>
    </div>
  </section>

  <!-- =================== Tasks List =================== -->
  <section class="tasks-container">
    <section class="task-box" data-status="pending">
      <div class="task-header">
        <span class="task-title">Test all microphones on main stage</span>
        <span class="task-category">Priority: High</span>
        <span class="task-status pending"><i class="fas fa-hourglass-start"></i> Pending</span>
      </div>
      <div class="task-body">
        <p>Description: Test all microphones and sound system on main stage to ensure proper volume and clarity.</p>
        <p>Due Date: 25 Aug, 5 PM</p>
        <p>Estimated Time: 2 hrs</p>
        <p>Category : Technical</p>
      </div>
      <div class="task-footer">
        <button class="task-action-btn">Start Task</button>
      </div>
    </section>

    <section class="task-box" data-status="pending">
      <div class="task-header">
        <span class="task-title">Check all lighting in hall</span>
        <span class="task-category">Priority: High</span>
        <span class="task-status pending"><i class="fas fa-hourglass-start"></i> Pending</span>
      </div>
      <div class="task-body">
        <p>Description: Ensure all lighting fixtures in the hall are functional and positioned correctly.</p>
        <p>Due Date: 26 Aug, 3 PM</p>
        <p>Estimated Time: 1.5 hrs</p>
        <p>Category : Catering</p>
      </div>
      <div class="task-footer">
        <button class="task-action-btn">Start Task</button>
      </div>
    </section>
  </section>

</section>

<script>
document.addEventListener("DOMContentLoaded", function() {
  const tasks = document.querySelectorAll('.tasks-container .task-box');

  tasks.forEach(task => {
    const btn = task.querySelector('.task-action-btn');
    const statusEl = task.querySelector('.task-status');

    btn.addEventListener('click', () => {
      if (btn.textContent === 'Start Task') {
        btn.textContent = 'Mark Complete';
        task.dataset.status = 'inprogress';
        statusEl.innerHTML = '<i class="fas fa-spinner"></i> In Progress';
        statusEl.className = 'task-status inprogress';
      } else if (btn.textContent === 'Mark Complete') {
        btn.textContent = 'Completed';
        task.dataset.status = 'completed';
        statusEl.innerHTML = '<i class="fas fa-check-circle"></i> Completed';
        statusEl.className = 'task-status completed';
        btn.disabled = true;
      }
      updateSummary();
    });
  });

  function updateSummary() {
    const total = tasks.length;
    const pending = document.querySelectorAll('.task-box[data-status="pending"]').length;
    const inprogress = document.querySelectorAll('.task-box[data-status="inprogress"]').length;
    const completed = document.querySelectorAll('.task-box[data-status="completed"]').length;
    const progressPercent = Math.round((completed / total) * 100);

    document.querySelector('.total-no').textContent = total;
    document.querySelector('.pending-no').textContent = pending;
    document.querySelector('.inprogress-no').textContent = inprogress;
    document.querySelector('.completed-no').textContent = completed;

    document.querySelector('.progress-fill').style.width = progressPercent + '%';
    document.querySelector('.progress-percentage').textContent = progressPercent + '%';
  }

  updateSummary();
});
</script>
